<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Job Portal</title>
    <link rel="stylesheet" href="./style/index.css" />
    <link rel="stylesheet" href="./style/home/hero.css" />
    <link rel="stylesheet" href="./style/home/job-list.css" />
    <link rel="stylesheet" href="./style/home/get-start.css" />
    <script
      src="https://kit.fontawesome.com/0eca523b09.js"
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <nav class="nav-bar">
      <div>
        <a href="./Index.html">
          <img
            class="logo"
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRUsQiplH_OWtHnMb1Nrk31z58OJN009JG-w&usqp=CAU"
            alt="logo"
        /></a>
        <ul>
          <li>
            <a style="color: black" href="./applied.html">Applied Job</a>
          </li>
          <li>
            <a style="color: black" href="./job-list.html">Job List</a>
          </li>
          <ul class="log"></ul>
        </ul>
        <button id="menu">&#9776;</button>
      </div>
    </nav>
    <aside class="m-nav">
      <ul>
        <li>
          <a style="color: black" href="./applied.html">Applied Job</a>
        </li>
        <li>
          <a style="color: black" href="./job-list.html">Job List</a>
        </li>
        <ul class="log"></ul>
      </ul>
    </aside>
    <section>
      <div class="hero">
        <h1>FIND THE JOB THAT FITS YOUR LIFE</h1>
        <h4>We offer thousands of jobs vacancies right now</h4>
        <div class="search-job">
          <input type="text" name="" id="job-title" placeholder="Job Title" />
          <input type="text" name="" id="location" placeholder="Location" />
          <button class="search-btn">SEARCH</button>
        </div>
      </div>
    </section>
    <div style="width: 95%; margin: auto">
      <section style="padding: 40px 20px">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
          "
        >
          <h1>Hiring now</h1>
        </div>
        <div id="job-detail"></div>

        <div id="job-list" class="job-list"></div>
      </section>
      <!-- <section style="padding: 0 20px">
        <h1>Trending jobs</h1>
        <div style="padding: 20px 0">
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #e0e0e0;
              padding: 20px 0;
            "
          >
            <div
              style="
                display: flex;
                gap: 10px;
                align-items: center;
                padding: 0 20px;
              "
            >
              <img
                src="https://photos.wellfound.com/startups/i/90183-bed46f22aafe8af7dc65cdd73fff2f76-medium_jpg.jpg?buster=1620918177"
                alt=""
                style="width: 50px; border-radius: 5px"
              />
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 10px;
                  padding: 0 20px;
                "
              >
                <h4>Discord</h4>
                <p>501-1000 employees</p>
              </div>
            </div>
            <div style="display: flex; gap: 10px">
              <button class="outline-btn">Apply</button>
            </div>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #e0e0e0;
              padding: 20px 0;
            "
          >
            <div
              style="
                display: flex;
                gap: 10px;
                align-items: center;
                padding: 0 20px;
              "
            >
              <img
                src="https://photos.wellfound.com/startups/i/90183-bed46f22aafe8af7dc65cdd73fff2f76-medium_jpg.jpg?buster=1620918177"
                alt=""
                style="width: 50px; border-radius: 5px"
              />
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 10px;
                  padding: 0 20px;
                "
              >
                <h4>Discord</h4>
                <p>501-1000 employees</p>
              </div>
            </div>
            <div style="display: flex; gap: 10px">
              <button class="outline-btn">Apply</button>
            </div>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #e0e0e0;
              padding: 20px 0;
            "
          >
            <div
              style="
                display: flex;
                gap: 10px;
                align-items: center;
                padding: 0 20px;
              "
            >
              <img
                src="https://photos.wellfound.com/startups/i/90183-bed46f22aafe8af7dc65cdd73fff2f76-medium_jpg.jpg?buster=1620918177"
                alt=""
                style="width: 50px; border-radius: 5px"
              />
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 10px;
                  padding: 0 20px;
                "
              >
                <h4>Discord</h4>
                <p>501-1000 employees</p>
              </div>
            </div>
            <div style="display: flex; gap: 10px">
              <button class="outline-btn">Apply</button>
            </div>
          </div>
          <div
            style="
              display: flex;
              justify-content: space-between;
              align-items: center;
              border-bottom: 1px solid #e0e0e0;
              padding: 20px 0;
            "
          >
            <div
              style="
                display: flex;
                gap: 10px;
                align-items: center;
                padding: 0 20px;
              "
            >
              <img
                src="https://photos.wellfound.com/startups/i/90183-bed46f22aafe8af7dc65cdd73fff2f76-medium_jpg.jpg?buster=1620918177"
                alt=""
                style="width: 50px; border-radius: 5px"
              />
              <div
                style="
                  display: flex;
                  flex-direction: column;
                  gap: 10px;
                  padding: 0 20px;
                "
              >
                <h4>Discord</h4>
                <p>501-1000 employees</p>
              </div>
            </div>
            <div style="display: flex; gap: 10px">
              <button class="outline-btn">Apply</button>
            </div>
          </div>
        </div>
      </section> -->
      <section class="get-start">
        <img src="https://wellfound.com/images/jobs/gkutg%201.png" alt="" />
        <div class="get-start-dec">
          <h1>Get started today</h1>
          <h4>
            To apply to jobs with one-click and connect with founders and
            recruiters searching for your skills.
          </h4>
          <a href="./Profile.html" class="btn">Create your profile</a>
        </div>
      </section>
    </div>
    <footer>
      <img
        class="logo"
        src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRUsQiplH_OWtHnMb1Nrk31z58OJN009JG-w&usqp=CAU"
        alt="logo"
      />
      <h1>Job Portal<span style="color: blue">:</span></h1>
      <p>We offer thousands of jobs vacancies right now</p>
      <p style="font-size: 14px">
        Copyright Â© 2023 job portal. All rights reserved.
      </p>
    </footer>
    <script>
      let actId;
      const jobCard = document.getElementsByClassName("job-card");
      let isDetailOpen = false;
      // showLess.addEventListener("click", () => {
      //   isDetailOpen = false;
      //   jobDetail[0].style.width = isDetailOpen ? "50%" : 0;
      //   showLess.style.display = "none";
      // });
      // for (let i = 0; i < jobCard.length; i++) {
      //   jobCard[i].addEventListener("click", () => {
      //     console.log(jobDetail);
      //     isDetailOpen = !isDetailOpen;
      //     jobDetail[0].style.width = isDetailOpen ? "50%" : 0;
      //     showLess.style.display = "flex";
      //   });
      // }
      const getDataById = async (id) => {
        try {
          const response = await fetch(
            `http://localhost:9000/JobsDetails?J_id=${id}`,
            {
              method: "GET",
              mode: "cors",
              cache: "no-cache",
              credentials: "same-origin",
              headers: {
                "Content-Type": "application/json",
              },
              redirect: "follow",
              referrerPolicy: "no-referrer",
            }
          );

          const data = await response.json();
          console.log(data);
          if (data) {
            document.getElementById(
              "job-detail"
            ).innerHTML = ` <div class="job-detail">
          <button id="show-less" class="show-detail"><</button>
          <div
            style="
              overflow-y: scroll;
              height: calc(100vh - 90px) !important;
              padding: 80px 20px 20px 20px;
            "
          >
            <div
              style="
                display: flex;
                justify-content: space-between;
                align-items: center;
              "
              class="profile-img-card"
            >
              <div style="display: flex; align-items: center; gap: 20px">
                <div>
                  <img
                    src=${
                      data?.jobDetails?.Comapny_logo ??
                      "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRUsQiplH_OWtHnMb1Nrk31z58OJN009JG-w&usqp=CAU"
                    }
                    alt=""
                    style="width: 60px; height: auto"
                  />
                </div>
                <div style="display: flex; flex-direction: column; gap: 3px">
                  <h4>${data?.jobDetails?.Company_name}</h4>
                  <p>${data?.jobDetails?.Industry}</p>
                  <p>${data?.jobDetails?.Main_address}</p>
                </div>
              </div>
              <button class="btn">Apply</button>
            </div>
            <br />
            <div style="display: flex; gap: 20px">
              <div>
                <h5>Posted date</h5>
                <p>${data?.jobDetails?.Post_date}</p>
              </div>
              <div>
                <h5>Due date</h5>
                <p>${data?.jobDetails?.Due_date}</p>
              </div>
            </div>
            <br />
            <h3>${data?.jobDetails?.Job_title}</h3>
            <br />
            <p>
             ${data?.jobDetails?.Job_desc}
            </p>
            <br />
            <h4>Industry</h4>
            <div
              style="
                display: flex;
                gap: 10px;
                margin-top: 10px;
                flex-direction: column;
              "
            >
              <p>${data?.jobDetails?.Industry}</p>
            </div>
            <br />
            <h4>Skills</h4>
            <div
              style="
                display: flex;
                gap: 10px;
                margin-top: 10px;
                font-size: large;
              "
            >
              ${data?.jobDetails?.jobRoles?.map(
                (i) => `<div class="tag">${i?.roles}</div>`
              )}
            </div>
            <br />
            <h4>Requirements</h4>
            <div
              style="
                display: flex;
                gap: 10px;
                margin-top: 10px;
                flex-direction: column;
              "
            >
            ${data?.eduReq?.map((i) => `<p>${i?.Requirements}</p>`)}
              <p>1-2 years of sales experience.</p>
              <p>
                A background in management, with a minimum of 2 years in a
                management role.
              </p>
              <p>Proven success as a developer.</p>
              <p>Experience directing projects and delegating tasks.</p>
            </div>
          </div>
        </div>`;
          }
        } catch (err) {
          // alert("An error occurred:", error);
        }
      };
      const handleOpen = (id) => {
        actId = id;
        getDataById(id);
        isDetailOpen = !isDetailOpen;
        document.getElementById("job-detail").style.width = isDetailOpen
          ? "50%"
          : 0;
      };

      for (let i = 0; i < jobCard.length; i++) {
        jobCard[i].addEventListener("click", () => {
          console.log(jobDetail);
          isDetailOpen = !isDetailOpen;
          jobDetail.style.width = isDetailOpen ? "50%" : 0;
        });
      }

      const getData = async () => {
        try {
          const response = await fetch(`http://localhost:9000/`, {
            method: "GET",
            // body: e,
            mode: "cors",
            cache: "no-cache",
            credentials: "same-origin",
            headers: {
              "Content-Type": "application/json",
            },
            redirect: "follow",
            referrerPolicy: "no-referrer",
          });

          const data = await response.json();
          console.log(data);
          if (data) {
            const jobList = document.getElementById("job-list");
            console.log(jobList);
            jobList.innerHTML = "";
            data?.map((item, index) => {
              jobList.innerHTML += `  <div class="job-card"  onclick={handleOpen(${
                item?.J_id
              })}>
          <div
            style="
              display: flex;
              gap: 10px;
              align-items: center;
              padding: 0 20px;
            "
          >
            <img
              src=${
                item?.Comapny_logo ??
                "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRRUsQiplH_OWtHnMb1Nrk31z58OJN009JG-w&usqp=CAU"
              }
              alt=""
              style="width: 50px; border-radius: 5px;  flex-shrink: 0 !important;
                    height: 60px;
                    object-fit: contain;"
            />
            <div
              style="
                display: flex;
                flex-direction: column;
                gap: 10px;
                padding: 0 20px;
              "
            >
              <h4>${item?.Company_name}</h4>
              <p>${item?.Industry}</p>
            </div>
          </div>
          <h1  style="padding: 0 20px">${item?.Job_title}</h1>
          <p style="padding: 0 20px">
            ${item?.Job_desc}
          </p>
          <div
            style="
              display: flex;
              flex-direction: column;
              gap: 10px;
              padding: 0 20px;
            "
          >
          <div style="display: flex; gap: 10px;">Location: <span class="tag">${
            item?.Main_address
          }</span></div>
            <div style="display: flex; gap: 10px;">Job Tab: <span class="tag">${
              item?.Job_type
            }</span></div>
            <div>Post date: ${item?.Post_date?.split("T")[0]}</div>
          </div>
          <div class="job-card-review">
            <span>${item?.Open_vacency} Open Position</span>
            <i class="fa-solid fa-chevron-right"></i>
          </div>
        </div>`;
              return;
            });
          }
        } catch (err) {
          // alert("An error occurred:", error);
        }
      };
      getData();
    </script>
    <script></script>
    <script src="../script/nav.js"></script>
  </body>
</html>
